# 关于DNS

什么是DNS、A记录、子域名、CNAME别名、MX记录、TXT记录、SRV记录、TTL值、泛域名（泛解析）、域名转向、域名绑定

以上问题，有些是明白的，有些却没有研究或涉及过，还有些是一知半解，这里一起做个记录

参考:[51cto博客:关于DNS](http://it815.blog.51cto.com/526819/136414)

## DNS
DNS,**Domain Name System/Service** .域名系统为Internet上的主机分配域名地址和IP地址。由于网络中的计算机都必须有个IP地址，来识别互相之间才能通信。但让我们记住一大串IP地址访问网站显然是不可能的，所以用户使用域名地址，而DNS系统的功能就是自动把域名地址翻译成IP地址。域名服务是运行域名系统的Internet工具。执行域名服务的服务器称之为DNS服务器，通过DNS服务器来应答域名服务的查询。
1、DNS就是域名服务器，他的任务就是确定域名的解析，例如A记录和MX记录等等。分别指向website的ip和邮件服务路由

2、任何域名都至少有一个DNS，一般是2个。但为什么要2个以上呢？因为DNS可以轮回处理，这样第一个解析失败可以找第二个。这样只要有一个DNS解析正常，就不会影响域名的正常使用。

3、如何确定域名的DNS  
略

4、有效的DNS表示当前正在起作用的DNS服务器是谁，比如查询结果是 *NS.XINNETDNS.COM* 、 *NS.XINNET.CN* 就表示当前域名是由以上两个负责解析。其他未显示的DNS的设置都是无效的。

5、DNS是可以修改的。修改以后需要24-72小时以后，全世界范围的所有的DNS服务器才能刷新过来。internic(内联网)的信息一般在24小时以后可以看到。另外，修改的过程，并不表示域名会停止解析，只要你在两边都做好了解析。如果生效了就是新的DNS在起作用。如果没有生效，就是旧的DNS在起作用。要么生效、要么不生效。不存在2个都不起作用的时间。所以域名解析不会中断。前提是两边都做了解析。

## A记录
A( **Address** )记录是用来指定*主机名* （或域名）对应的IP地址记录。用户可以将该域名下的网站服务器指向到自己的web server上。同时也可以设置您域名的子域名。通俗来说A记录就是服务器的IP，域名绑定A记录即使告诉DNS，当你输入域名时，给你引导向设置在DNS的A记录所对应的服务器。

## 子域名
子域名道理等同于二级域名，不过比二级域名更加延伸，比如我们继续扩展该域名的主机名，设置主机名为bbs.at,那么就可以建立一个三级域名：bbs.at.abc.com,当然可以是bbs.at.123.abc.com等等，我们统称为这些域名为顶级域名abc.com的子域名

## CNAME 别名指向记录
CNAME( Canonical Name )记录，通常称为别名指向。在这里，您可以定义一个主机别名，比如设置ftp.xxx.com，用来指向一个www.xxx.com，那么以后就可以用ftp.xxx.com来代替访问www.xxx.com了。

## MX记录
MX记录也叫做邮件路由记录，用户可以将该域名下的邮件服务器指向自己的mail server上，然后即可自行操作所有的邮箱设置。您只需要在线填写您服务器的IP地址，即可将您域名下的邮件全部转到您自己设置的响应的邮件服务器上。

简单的说：通过操作MX记录，您才可以得到以域名结尾的邮箱。

## TTL值
TTL值全称是“生存时间（Time To Live)”，简单的说它表示DNS记录在DNS服务器上缓存时间。要理解TTL值，请先看下面的一个例子： 
假设，有这样一个域名myhost.abc.com（其实，这就是一条DNS记录，通常表示在abc.com域中有一台名为myhost的主机）对应IP地址为1.1.1.1，它的TTL为10分钟。这个域名或称这条记录存储在一台名为dns.abc.com的DNS服务器上。 
现在有一个用户在浏览器中键入一下地址（又称URL）：[http://myhost.abc.com]() 这时会发生什么呢？  
该访问者指定的DNS服务器（或是他的ISP,互联网服务商, 动态分配给他的)8.8.8.8就会试图为他解释myhost.abc.com，当然8.8.8.8这台DNS服务器由于没有包含myhost.abc.com这条信息，因此无法立即解析，但是通过全球DNS的递归查询后，最终定位到dns.abc.com这台DNS服务器，dns.abc.com这台DNS服务器将myhost.abc.com对应的IP地址1.1.1.1告诉8.8.8.8这台DNS服务器，然有再由8.8.8.8告诉用户结果。8.8.8.8为了以后加快对myhost.abc.com这条记录的解析，就将刚才的1.1.1.1结果保留一段时间，这就是TTL时间，在这段时间内如果用户又有对myhost.abc.com这条记录的解析请求，它就直接告诉用户1.1.1.1，当TTL到期则又会重复上面的过程

## TXT记录
TXT 记录，一般指为某个主机名或域名设置的说明，如：  
admin IN TXT "管理员, 电话： 13901234567"  
mail IN TXT "邮件主机, 存放在xxx , 管理人：AAA"  
Jim IN TXT "contact: abc@mailserver.com"  
也就是您可以设置 TXT ，以便使别人联系到您   

## SRV 记录
SRV 记录：一般是为Microsoft的活动目录设置时的应用。DNS可以独立于活动目录，但是活动目录必须有DNS的帮助才能工作。为了活动目录能够正常的工作，DNS服务器必须支持服务定位（SRV）资源记录，资源记录把服务名字映射为提供服务的服务器名字。活动目录客户和域控制器使用SRV资源记录决定域控制器的IP地址。  
此技术细节请参考相应网站

## 域名绑定

什么是域名绑定  
域名绑定是指，域名绑定是指域名和主机(即某个服务器)的空间进行关联绑定,其实就是在虚拟服务器上设置或者WEB服务器上设置，使一个域名被引导向服务器上的某一特定空间（某一个特定站点），访问者访问你的域名的时候就会打开你存放在该空间上的网页，简单来说其实就是把域名解析到服务器IP,然后在服务器上设置该域名有权限访问的过程。一般虚拟主机有控制面板给进行绑定域名，如果没有面板就需要自己在服务器上的IIS里面设置

## 域名转向
域名转向我们又称为域名(URL)指向或域名转发，当用户地址栏中输入您的域名时，将会自动跳转到您所指定的另一个网络地址（URL）。   
假设abc.com是您注册的域名，则通过URL转发服务可以实现当用户访问[http://www.abc.com]()时，自动转向访问另外一个URL，如:我的空间不支持绑定到目录功能,所以为了方便访问者,我就设置:[http://bbs.bnxb.com]()来访问,这个是设置了通过URL转发服务转发到[http://www.bnxb.com/bbs]()上面来实现的，这样您就可以轻松实现多个域名指向一个网站或网站子目录；另外，通过URL转发服务，可以方便的实现将您的中文域名，设置自动转发到您的英文域名主站点。域名转发的另外一个好处就是可以把长域名压缩,用短域名的转向代替,让你的访客不需输入那么长的域名

## IIS连接数
IIS连接数指并发连接数，什么意思呢？  
要分几种情况：（以100M空间50人在线为例）  
1. 用户单点下载你的文件，结束后正常断开，这些连接是按照瞬间计算的，就是说你50人的网站瞬间可以接受同时50个点下载  
2. 用户打开你的页面，就算停留在该页面，这时候网页已经加载完了没有对服务器再发出任何请求，那么在用户完全打开这个页面的时间内算一个在线，在页面完全打开后IIS连接数就释放。  
3. 上面B的情况用户继续打开同一个网站的其他页面，那么在线人数按照用户最后一次点击（发出请求）计算，在这个时间内不管用户怎么点击（包括新窗口打开）都还是一人在线。  
4. 当你的页面内存在框架(Iframe)，那么每多一个框架就要多一倍的在线！因为这相当于用户同一时间向服务器请求了多个页面。  
5. 当用户打开页面然后正常关闭浏览器，用户的在线人数也会马上清除。  